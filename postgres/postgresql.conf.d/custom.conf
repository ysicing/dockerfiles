# PostgreSQL Custom Configuration
# 预加载扩展

# pg_stat_statements 需要预加载才能收集统计
# auto_explain 自动记录慢查询执行计划
shared_preload_libraries = 'pg_stat_statements,auto_explain'

# pg_stat_statements 配置
pg_stat_statements.track = all
pg_stat_statements.max = 10000

# auto_explain 配置
# 超过 1 秒的查询自动记录执行计划
auto_explain.log_min_duration = '1s'
# 记录嵌套语句（存储过程/函数内的查询）
auto_explain.log_nested_statements = on
# 记录实际执行时间（ANALYZE）
auto_explain.log_analyze = on
# 记录缓冲区使用情况
auto_explain.log_buffers = on
# 记录执行时间
auto_explain.log_timing = on

